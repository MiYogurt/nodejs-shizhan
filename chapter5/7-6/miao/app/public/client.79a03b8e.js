webpackJsonp([1],{133:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mapObj=e.mapObjToArray=void 0;var r=n(50);e.mapObjToArray=function(t,e){var n=[];return(0,r.forEachObjIndexed)(function(r,a){n.push(t(r,a,e))},e),n},e.mapObj=function(t,e){var n=[];return(0,r.forEachObjIndexed)(function(n,r){var a=t(n,r,e);e[r]=a},e),n}},139:function(t,e,n){"use strict";n(140);var r=n(143);n(390),r.app.$mount("#app")},140:function(t,e,n){"use strict";var r=n(141),a=function(t){return t&&t.__esModule?t:{default:t}}(r);window.Promise=window.Promise||a.default},143:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){var e=t.title,n=t.message,r=t.type,a=t.timeout,s=t.cb;return j.default[r](n,e,a,s)}Object.defineProperty(e,"__esModule",{value:!0}),e.store=e.router=e.app=void 0;var s=n(28),u=r(s),i=n(29),o=r(i),c=n(146),l=n(147),d=r(l),f=n(151),p=r(f),h=n(366),v=r(h),m=n(367),_=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(m),g=n(133),y=n(76),b=r(y),w=n(387),M=r(w),x=n(388),P=r(x),C=n(48),O=r(C),E=n(389),j=r(E);o.default.use(M.default),j.default.init();var k={success:a,error:a,info:a,warn:a};o.default.use(O.default,k),(0,c.sync)(v.default,p.default),o.default.prototype.$api=_,o.default.prototype.$dbMap=P.default;var T=new o.default(Object.assign({router:p.default,store:v.default},d.default));~function(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(a,s){try{var u=e[a](s),i=u.value}catch(t){return void n(t)}if(!u.done)return Promise.resolve(i).then(function(t){r("next",t)},function(t){r("throw",t)});t(i)}return r("next")})}}(u.default.mark(function t(){var e,n,r,a,s;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.getConfig();case 2:return e=t.sent,n=e.data,t.next=6,_.getCount();case 6:r=t.sent,a=r.data,v.default.commit("SET_COUNTS",{counts:a}),v.default.commit("SET_TABLES",{tables:n}),s=(0,g.mapObjToArray)(function(t,e){return{path:"/model/"+e+"/:page?",component:(0,b.default)(e)}},n),p.default.addRoutes(s);case 12:case"end":return t.stop()}},t,void 0)}))(),e.app=T,e.router=p.default,e.store=v.default},147:function(t,e,n){"use strict";function r(t){n(148)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(150),s=n(30),u=r,i=s(null,a.a,!1,u,null,null);e.default=i.exports},148:function(t,e){},150:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],s={render:r,staticRenderFns:a};e.a=s},151:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(29),s=r(a),u=n(152),i=r(u),o=n(153),c=r(o);s.default.use(i.default),e.default=new i.default({mode:"hash",routes:[{path:"/",component:c.default}]})},153:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(154),a=n.n(r),s=n(365),u=n(30),i=u(a.a,s.a,!1,null,null,null);e.default=i.exports},154:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(a,s){try{var u=e[a](s),i=u.value}catch(t){return void n(t)}if(!u.done)return Promise.resolve(i).then(function(t){r("next",t)},function(t){r("throw",t)});t(i)}return r("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(28),u=r(s),i=n(155),o=(r(i),n(75)),c=r(o),l=n(76),d=(r(l),n(50)),f=n(49);e.default={components:{VForm:c.default},computed:Object.assign({},(0,f.mapState)(["tables"])),methods:{nomarlizeConfig:function(t){var e=[];return(0,d.forEachObjIndexed)(function(t,n){e.push({show_name:n,push_name:n,defaultValue:"",type:t})},t),e}},mounted:function(){function t(){return e.apply(this,arguments)}var e=a(u.default.mark(function t(){var e,n,r,a;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$api.getConfig();case 2:return e=t.sent,n=e.data,t.next=6,this.$api.getCount();case 6:r=t.sent,a=r.data,this.$store.commit("SET_TABLES",{tables:n}),this.$store.commit("SET_COUNTS",{counts:a});case 10:case"end":return t.stop()}},t,this)}));return t}()}},155:function(t,e,n){"use strict";function r(t){n(156)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(157),s=n.n(a),u=n(159),i=n(30),o=r,c=i(s.a,u.a,!1,o,"data-v-7e38cbd6",null);e.default=c.exports},156:function(t,e){},157:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(74);!function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(r);e.default={data:function(){return{msg:'Vetur means "Winter" in icelandic.'}},computed:{count:function(){return this.$store.state.count}},methods:{hello:function(){console.log(this.msg)}}}},159:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"counter-wrapper"},[n("div",[t._v(t._s(t.msg))]),t._v(" "),t._m(0,!1,!1),t._v(" "),n("div",{staticClass:"counter"},[t._v("\n    "+t._s(t.count)+"\n  ")]),t._v(" "),n("button",{on:{click:function(e){t.$store.commit("INCREMENT")}}},[t._v("Increment")]),t._v(" "),n("button",{on:{click:function(e){t.$store.commit("DECREMENT")}}},[t._v("Decrement")]),t._v(" "),n("button",{on:{click:function(e){t.$store.dispatch("incrementAsync")}}},[t._v("Increment Async")])])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("img",{attrs:{src:"https://vuejs.org/images/logo.png",width:"200",height:"200"}})])}],s={render:r,staticRenderFns:a};e.a=s},161:function(t,e,n){"use strict";function r(t){n(162)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(163),s=n.n(a),u=n(364),i=n(30),o=r,c=i(s.a,u.a,!1,o,null,null);e.default=c.exports},162:function(t,e){},163:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(a,s){try{var u=e[a](s),i=u.value}catch(t){return void n(t)}if(!u.done)return Promise.resolve(i).then(function(t){r("next",t)},function(t){r("throw",t)});t(i)}return r("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(28),u=r(s),i=n(49),o=n(50),c=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(o),n(363)),l=r(c),d=n(75),f=r(d),p=n(133),h=n(48),v=r(h);e.default={name:"model-list",props:{type:String},components:{VForm:f.default},data:function(){return{limit:20,displayedItems:[],displayedPage:1,open:!1,editItem:null}},computed:Object.assign({page:function(){return Number(this.$route.params.page)||1},maxPage:function(){var t=this.$store.state.counts;return Math.ceil(t[this.type]/this.limit)||1},hasMore:function(){return this.page<this.maxPage}},(0,i.mapState)(["tables"])),watch:{page:function(t,e){this.loadItems(t,e)}},notifications:{showSuccessMsg:{type:v.default.types.success,title:"æ“ä½œæˆåŠŸ",message:"å®Œæˆ!"},showErrorMsg:{type:v.default.types.error,title:"æ“ä½œå¤±è´¥",message:"ç©º"}},methods:{hideModal:function(){this.open=!1},edit:function(t){this.editItem=t,console.log(this.editItem),this.open=!0},finish:function(){this.open=!1,this.editItem=null,this.showSuccessMsg(),this.loadItems()},remove:function(){function t(t){return e.apply(this,arguments)}var e=a(u.default.mark(function t(e){var n;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$api.del(this.type,e);case 3:n=t.sent,200===n.status&&(this.showSuccessMsg({message:"åˆ é™¤æˆåŠŸ"}),this.loadItems()),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),this.showErrorMsg({message:t.t0.response.data});case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return t}(),nomarlizeCreateConfig:function(t){var e=this;return(0,p.mapObjToArray)(function(t,n){return{show_name:e.$dbMap[n]||n,push_name:n,defaultValue:"",type:t}},t)},pretty:l.default,loadItems:function(){function t(){return e.apply(this,arguments)}var e=a(u.default.mark(function t(){var e,n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.page<0||this.page>this.maxPage)){t.next=3;break}return this.$router.replace("/model/"+this.type+"/1"),t.abrupt("return");case 3:return this.displayedPage=a,e={limit:this.limit},this.limit*(this.page-1)&&(e.offset=this.limit*(this.page-1)),t.next=8,this.$api.getList(this.type,e);case 8:n=t.sent,r=n.data,console.log(r),this.displayedItems=r;case 12:case"end":return t.stop()}},t,this)}));return t}()},mounted:function(){function t(){return e.apply(this,arguments)}var e=a(u.default.mark(function t(){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadItems();case 2:case"end":return t.stop()}},t,this)}));return t}()}},364:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container content"},[n("router-link",{staticClass:"title is-4",attrs:{to:"/"}},[t._v(" ðŸ¡ è¿”å›žé¦–é¡µ")]),t._v(" "),n("hr"),t._v(" "),n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("h5",{staticClass:"title is-6"},[t._v("åŸºæœ¬è¯¦æƒ…")]),t._v(" "),n("ul",[n("li",[t._v("æœ€å¤§é¡µæ•° "+t._s(t.maxPage))]),t._v(" "),n("li",[t._v("å½“å‰é¡µé¢ "+t._s(t.page))]),t._v(" "),n("li",[t._v("å½“å‰åˆ†é¡µ "+t._s(t.limit))]),t._v(" "),n("li",{staticClass:"create",on:{click:function(e){t.open=!0}}},[t._v("åˆ›å»º")])])]),t._v(" "),n("div",{staticClass:"column"},[n("h5",{staticClass:"title is-6"},[t._v("åˆ†é¡µé“¾æŽ¥")]),t._v(" "),n("ul",[t._l(t.maxPage,function(e){return[n("li",{key:e},[n("router-link",{key:e,staticClass:"btn",attrs:{to:"/model/"+t.type+"/"+e}},[t._v(" ç¬¬ "+t._s(e)+" é¡µ ")])],1)]})],2)])]),t._v(" "),n("div",{staticClass:"container"},[n("table",{staticClass:"table table__model-list"},[n("thead",[t._l(t.tables[t.type],function(e,r){return n("th",{key:r,domProps:{textContent:t._s(r)}})}),t._v(" "),n("th",[t._v("æ“ä½œ")])],2),t._v(" "),t._l(t.displayedItems,function(e){return n("tr",{key:e.id},[t._l(e,function(e){return n("td",{key:e,domProps:{textContent:t._s(e)}})}),t._v(" "),n("td",[n("i",{staticClass:"fas fa-trash-alt",on:{click:function(n){t.remove(e.id)}}}),n("i",{staticClass:"fas fa-edit",on:{click:function(n){t.edit(e)}}})])],2)})],2)]),t._v(" "),n("vue-modaltor",{attrs:{visible:t.open},on:{hide:t.hideModal}},[n("v-form",{attrs:{model:t.type,config:t.nomarlizeCreateConfig(t.tables[t.type]),url:"/api/model/"+t.type,edit:t.editItem},on:{finish:t.finish}})],1)],1)},a=[],s={render:r,staticRenderFns:a};e.a=s},365:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page"},[n("div",{staticClass:"container"},[n("h2",[t._v("Model List")]),t._v(" "),t._l(t.tables,function(e,r){return[n("div",{key:r,staticClass:"is-size-4"},[n("router-link",{staticClass:"tag is-small",attrs:{to:{path:"/model/"+r}},domProps:{textContent:t._s(r)}})],1)]})],2)])},a=[],s={render:r,staticRenderFns:a};e.a=s},366:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(29),s=r(a),u=n(49),i=r(u);s.default.use(i.default);var o={count:0,tables:{},counts:{}},c=function(t){return function(e,n){return e[t]=n[t]}},l={INCREMENT:function(t){t.count++},DECREMENT:function(t){t.count--},SET_TABLES:c("tables"),SET_COUNTS:c("counts")},d={incrementAsync:function(t){var e=t.commit;setTimeout(function(){e("INCREMENT")},200)},setTables:function(t,e){(0,t.commit)("SET_TABLES",{tables:e.tables})}},f=new i.default.Store({state:o,mutations:l,actions:d});e.default=f},367:function(t,e,n){"use strict";function r(){return l.default.get(d+"_table",{auth:{username:"dd",password:"888888"}})}function a(){return l.default.get(d+"_count",{auth:{username:"dd",password:"888888"}})}function s(t,e){return f.get(t,{params:e})}function u(t,e){return f({method:"POST",url:"/"+t,data:e})}function i(t,e,n){return f({method:"PUT",url:"/"+t+"/"+e,data:n})}function o(t,e,n){return f({method:"DELETE",url:"/"+t+"/"+e,data:n})}Object.defineProperty(e,"__esModule",{value:!0}),e.getConfig=r,e.getCount=a,e.getList=s,e.create=u,e.update=i,e.del=o;var c=n(368),l=function(t){return t&&t.__esModule?t:{default:t}}(c),d="http://localhost:7001/api/v1/admin",f=l.default.create({baseURL:d,auth:{username:"dd",password:"888888"}})},388:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={id:"ID å·",token:"è®¿é—®ä»¤ç‰Œ",token_expires_at:"ä»¤ç‰Œè¿‡æœŸæ—¶é—´",scope:"æŽˆæƒèŒƒå›´",client_id:"å®¢æˆ·ç«¯ ID å·",user_id:"ç”¨æˆ· ID å·",createdAt:"åˆ›å»ºæ—¥æœŸ",updatedAt:"æ›´æ–°æ—¥æœŸ",code:"OAuth2 æŽˆæƒç ",expires_at:"è¶…æ—¶æ—¶é—´",redirect_uri:"è®¿é—®ä»¤ç‰Œå®‰å…¨çš„å‘æ”¾ç½‘å€"}},390:function(t,e,n){"use strict";var r=n(391),a=function(t){return t&&t.__esModule?t:{default:t}}(r);a.default.install({onUpdateReady:function(){console.log("update ready"),a.default.applyUpdate()},onUpdated:function(){console.log("updated"),location.reload()}})},75:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(a,s){try{var u=e[a](s),i=u.value}catch(t){return void n(t)}if(!u.done)return Promise.resolve(i).then(function(t){r("next",t)},function(t){r("throw",t)});t(i)}return r("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(160),u=r(s),i=n(28),o=r(i),c=n(29),l=r(c),d=n(74),f=n(48),p=r(f),h=l.default.component("v-form",{props:{model:{type:String,required:!0},url:{type:String,required:!0},config:{type:Array,required:!0},edit:{type:null,required:!0}},data:function(){return Object.assign({},this.config.reduce(function(t,e){var n=e.push_name,r=e.defaultValue;return t[n]=r||"",t},{}))},notifications:{showSuccessMsg:{type:p.default.types.success,title:"æ“ä½œæˆåŠŸ",message:"æ•°æ®åˆ›å»ºå®Œæˆ!"},showErrorMsg:{type:p.default.types.error,title:"æ“ä½œå¤±è´¥",message:"ç©º"}},computed:{fieldsNames:function(){return(0,d.map)(this.config,"push_name")}},watch:{edit:function(t){Object.assign(this,t)}},methods:{change:function(t){var e=this;(0,d.debounce)(function(){e.$set(e,t.target.name,t.target.value)},520)()},handleRowData:function(){return(0,d.pick)(this,this.fieldsNames)},pushMethod:function(t,e){return this.edit?this.$api.update(t,e.id,e):this.$api.create(t,e)},resets:function(){var t=this;this.fieldsNames.map(function(e){t[e]=""})},push:function(){function t(t){return e.apply(this,arguments)}var e=a(o.default.mark(function t(e){var n,r,a;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.prev=1,n=this.handleRowData(),t.next=5,this.pushMethod(this.model,n);case 5:r=t.sent,a=r.data,a&&(this.resets(),this.$emit("finish")),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),this.showErrorMsg({message:t.t0.response.data});case 13:case"end":return t.stop()}},t,this,[[1,10]])}));return t}()},render:function(){var t=this,e=arguments[0],n=this.config.map(function(n){var r=n.push_name,a=n.type,s=n.defaultValue,i=n.show_name;switch(a){case"textarea":return e("div",{class:"field"},[e("label",{class:"label"},[i]),e("div",{class:"control"},[e("textarea",(0,u.default)([{class:"textarea",attrs:{name:r},domProps:{value:t[r]},on:{input:function(e){e.target.composing||t.$set(t,r,e.target.value)}}},{directives:[{name:"model",value:t[r]}]}]),[s])])]);default:return e("div",{class:"field"},[e("label",{class:"label"},[i]),e("div",{class:"control"},[e("input",(0,u.default)([{class:"input",domProps:{type:a,value:t[r]},attrs:{name:r},on:{input:function(e){e.target.composing||t.$set(t,r,e.target.value)}}},{directives:[{name:"model",value:t[r]}]},{attrs:{placeholder:i}}]),[])])])}});return e("div",{class:"form"},[e("h2",null,[this.model]),this.data,e("form",null,[n,e("div",{class:"field "},[e("div",{class:"control"},[e("button",(0,u.default)([{class:"button is-primary"},{on:{click:function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];t.push.apply(t,[e].concat(r))}}}]),["æäº¤æ•°æ®"])])])])])}});e.default=h},76:function(t,e,n){"use strict";function r(t){return{name:t+"-list-view",render:function(e){return e(s.default,{props:{type:t}})}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var a=n(161),s=function(t){return t&&t.__esModule?t:{default:t}}(a)}},[139]);
//# sourceMappingURL=client.79a03b8e.js.map